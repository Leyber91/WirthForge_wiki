<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="tokenGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ffd93d;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe66d;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="energyGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#6bcf7f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#96e6a1;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="frameGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ff8e8e;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="500" fill="#0a0a0a"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="20" font-weight="bold">
    WF-FND-004: DECIPHER Token-to-Energy Pipeline
  </text>
  
  <!-- Token Input -->
  <rect x="50" y="80" width="120" height="60" fill="url(#tokenGrad)" rx="8"/>
  <text x="110" y="105" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    Token Stream
  </text>
  <text x="110" y="120" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="10">
    From Layer 2
  </text>
  
  <!-- 60Hz Frame Loop -->
  <rect x="220" y="60" width="140" height="100" fill="url(#frameGrad)" rx="8"/>
  <text x="290" y="85" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    60Hz Frame Loop
  </text>
  <text x="290" y="100" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="10">
    16.67ms Budget
  </text>
  <text x="290" y="115" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="9">
    • Token Queuing
  </text>
  <text x="290" y="128" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="9">
    • Energy Calculation
  </text>
  <text x="290" y="141" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="9">
    • Pattern Detection
  </text>
  
  <!-- Energy Calculator -->
  <rect x="420" y="80" width="140" height="60" fill="url(#energyGrad)" rx="8"/>
  <text x="490" y="105" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    Energy Calculator
  </text>
  <text x="490" y="120" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="10">
    WF-FND-002 Formula
  </text>
  
  <!-- Pattern Detection -->
  <rect x="220" y="200" width="140" height="80" fill="#4d96ff" rx="8"/>
  <text x="290" y="225" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    Pattern Detection
  </text>
  <text x="290" y="240" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="10">
    Interference
  </text>
  <text x="290" y="255" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="10">
    Resonance
  </text>
  <text x="290" y="270" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="10">
    Level Gating
  </text>
  
  <!-- Event Emission -->
  <rect x="620" y="80" width="140" height="60" fill="#9966ff" rx="8"/>
  <text x="690" y="105" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    Event Emission
  </text>
  <text x="690" y="120" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="10">
    To Layer 4
  </text>
  
  <!-- State Management -->
  <rect x="420" y="200" width="140" height="80" fill="#ff9f40" rx="8"/>
  <text x="490" y="225" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
    State Management
  </text>
  <text x="490" y="240" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="10">
    EMA Filtering
  </text>
  <text x="490" y="255" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="10">
    Accumulation
  </text>
  <text x="490" y="270" text-anchor="middle" fill="#000000" font-family="Arial, sans-serif" font-size="10">
    History Tracking
  </text>
  
  <!-- Arrows -->
  <line x1="170" y1="110" x2="215" y2="110" stroke="#ffffff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="365" y1="110" x2="415" y2="110" stroke="#ffffff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="565" y1="110" x2="615" y2="110" stroke="#ffffff" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Vertical connections -->
  <line x1="290" y1="165" x2="290" y2="195" stroke="#ffffff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="490" y1="145" x2="490" y2="195" stroke="#ffffff" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Performance indicators -->
  <rect x="50" y="350" width="800" height="100" fill="#1a1a1a" rx="8" stroke="#333333" stroke-width="1"/>
  <text x="70" y="375" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold">
    Performance Constraints
  </text>
  <text x="70" y="395" fill="#ffffff" font-family="Arial, sans-serif" font-size="12">
    • 60 FPS Target: 16.67ms per frame maximum
  </text>
  <text x="70" y="410" fill="#ffffff" font-family="Arial, sans-serif" font-size="12">
    • Energy Events: Real-time emission with privacy filtering
  </text>
  <text x="70" y="425" fill="#ffffff" font-family="Arial, sans-serif" font-size="12">
    • Backpressure: Graceful degradation under load
  </text>
  
  <text x="450" y="395" fill="#ffffff" font-family="Arial, sans-serif" font-size="12">
    • Multi-model: Parallel token stream processing
  </text>
  <text x="450" y="410" fill="#ffffff" font-family="Arial, sans-serif" font-size="12">
    • Pattern Detection: UX level-based feature gating
  </text>
  <text x="450" y="425" fill="#ffffff" font-family="Arial, sans-serif" font-size="12">
    • Local Processing: No external dependencies
  </text>
</svg> 