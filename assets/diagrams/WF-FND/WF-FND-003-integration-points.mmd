graph TB
    subgraph "WIRTHFORGE Integration Architecture"
        direction TB
        
        subgraph CORE["üß¨ WF-FND-003 Core Layers"]
            L1_CORE["L1: Input & Identity"]
            L2_CORE["L2: Model Compute"] 
            L3_CORE["L3: Orchestration & Energy"]
            L4_CORE["L4: Contracts & Transport"]
            L5_CORE["L5: Visualization & UX"]
        end
        
        subgraph TECH["üîß Technical Implementation"]
            TECH001["WF-TECH-001<br/>Complete System Architecture"]
            TECH002["WF-TECH-002<br/>Native Ollama Integration"]
            TECH003["WF-TECH-003<br/>WebSocket Protocol"]
            TECH004["WF-TECH-004<br/>Flask Microservices"]
            TECH005["WF-TECH-005<br/>Energy State Management"]
            TECH006["WF-TECH-006<br/>Database & Storage"]
        end
        
        subgraph UX["üé® User Experience"]
            UX006["WF-UX-006<br/>UI Component Library"]
            UX_DOORS["Door System<br/>Entry Points"]
            UX_LEVELS["Progressive Levels<br/>1-5 Complexity"]
            UX_AUDIT["Audit Mode<br/>Data Transparency"]
        end
        
        subgraph FOUNDATION["üèóÔ∏è Foundation Documents"]
            FND001["WF-FND-001<br/>Manifesto & Vision"]
            FND002["WF-FND-002<br/>Energy Metaphor"]
            FND005["WF-FND-005<br/>Abstraction Layers"]
            FND006["WF-FND-006<br/>Governance & Evolution"]
        end
    end
    
    %% Layer to Tech Mappings
    L1_CORE -->|"Identity & Auth Logic"| TECH004
    L1_CORE -->|"Session Management"| TECH006
    
    L2_CORE -->|"Model Execution Engine"| TECH002
    L2_CORE -->|"Local Model Server"| TECH001
    
    L3_CORE -->|"Energy Calculations"| TECH005
    L3_CORE -->|"State Store Design"| TECH006
    L3_CORE -->|"60Hz Update Loop"| TECH001
    
    L4_CORE -->|"WebSocket Messages"| TECH003
    L4_CORE -->|"API Gateway Design"| TECH004
    L4_CORE -->|"Service Boundaries"| TECH001
    
    L5_CORE -->|"UI Components"| UX006
    L5_CORE -->|"Progressive Disclosure"| UX_LEVELS
    L5_CORE -->|"Visual Contracts"| UX_AUDIT
    
    %% Foundation Dependencies
    FND001 -->|"Local-First Principles"| L2_CORE
    FND001 -->|"Visible Computation"| L5_CORE
    
    FND002 -->|"Energy Units (EU)"| L3_CORE
    FND002 -->|"Visual Telemetry"| L4_CORE
    FND002 -->|"Physics Metaphors"| L5_CORE
    
    FND005 -->|"Progressive Complexity"| L5_CORE
    FND005 -->|"Layer Boundaries"| L1_CORE
    FND005 -->|"Layer Boundaries"| L2_CORE
    FND005 -->|"Layer Boundaries"| L3_CORE
    FND005 -->|"Layer Boundaries"| L4_CORE
    
    FND009 -->|"Terminology Consistency"| TECH003
    FND009 -->|"API Naming"| TECH004
    
    %% UX Integration
    UX_DOORS -->|"Entry Point Logic"| L1_CORE
    UX_LEVELS -->|"Feature Gating"| L3_CORE
    UX_AUDIT -->|"Data Transparency"| L4_CORE
    
    %% Cross-Layer Data Flows
    subgraph DATAFLOW["üìä Data Flow Patterns"]
        INPUT["User Input"]
        TOKENS["Token Streams"]
        ENERGY["Energy Events"]
        VISUALS["Visual Updates"]
        FEEDBACK["User Feedback"]
    end
    
    INPUT -->|"Via L4 API"| L1_CORE
    L1_CORE -->|"Validated Events"| L3_CORE
    L3_CORE -->|"Model Requests"| L2_CORE
    L2_CORE -->|"Token Streams"| TOKENS
    TOKENS -->|"Via L3 Processing"| ENERGY
    ENERGY -->|"Via L4 Transport"| VISUALS
    VISUALS -->|"Via L5 Rendering"| FEEDBACK
    FEEDBACK -->|"User Actions"| INPUT
    
    %% Integration Contracts
    subgraph CONTRACTS["üìã Integration Contracts"]
        API_SCHEMA["API Schema Definitions"]
        EVENT_SCHEMA["Event Structure Specs"]
        STATE_SCHEMA["State Management Rules"]
        VISUAL_SCHEMA["Visual Contract Specs"]
    end
    
    TECH003 -->|"Defines"| API_SCHEMA
    TECH003 -->|"Defines"| EVENT_SCHEMA
    TECH005 -->|"Defines"| STATE_SCHEMA
    UX006 -->|"Defines"| VISUAL_SCHEMA
    
    API_SCHEMA -->|"Enforced by"| L4_CORE
    EVENT_SCHEMA -->|"Produced by"| L3_CORE
    STATE_SCHEMA -->|"Managed by"| L3_CORE
    VISUAL_SCHEMA -->|"Implemented by"| L5_CORE
    
    %% Performance Integration
    subgraph PERFORMANCE["‚ö° Performance Requirements"]
        REALTIME["60Hz Real-time Loop"]
        BACKPRESSURE["Backpressure Management"]
        SCALING["Hardware Tier Scaling"]
        OPTIMIZATION["Performance Optimization"]
    end
    
    REALTIME -->|"Enforced by"| L3_CORE
    BACKPRESSURE -->|"Handled by"| L4_CORE
    SCALING -->|"Adapted by"| L2_CORE
    OPTIMIZATION -->|"Monitored by"| TECH001
    
    %% Color Coding
    classDef coreLayer fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef techDoc fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef uxDoc fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef foundationDoc fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef dataFlow fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    classDef contract fill:#e1f5fe,stroke:#0277bd,stroke-width:1px
    classDef performance fill:#ffebee,stroke:#d32f2f,stroke-width:1px
    
    class L1_CORE,L2_CORE,L3_CORE,L4_CORE,L5_CORE coreLayer
    class TECH001,TECH002,TECH003,TECH004,TECH005,TECH006 techDoc
    class UX006,UX_DOORS,UX_LEVELS,UX_AUDIT uxDoc
    class FND001,FND002,FND005,FND009 foundationDoc
    class INPUT,TOKENS,ENERGY,VISUALS,FEEDBACK dataFlow
    class API_SCHEMA,EVENT_SCHEMA,STATE_SCHEMA,VISUAL_SCHEMA contract
    class REALTIME,BACKPRESSURE,SCALING,OPTIMIZATION performance
