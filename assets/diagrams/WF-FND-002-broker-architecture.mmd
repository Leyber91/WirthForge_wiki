graph TB
    subgraph "Local Environment"
        L1[Primary Ollama Instance]
        L2[Local Model Cache]
        L3[WIRTHFORGE Broker]
        L4[User Interface]
        L5[Local Storage]
    end
    
    subgraph "Satellite Models (Optional)"
        S1[Specialized Model A]
        S2[Specialized Model B]
        S3[High-Power Model C]
        S4[Cloud Instance D]
    end
    
    subgraph "Coordination Layer"
        C1[Request Router]
        C2[Load Balancer]
        C3[Response Aggregator]
        C4[Sync Detector]
        C5[Performance Monitor]
    end
    
    subgraph "Visualization Engine"
        V1[Token Stream Processor]
        V2[Physics Renderer]
        V3[Level Manager]
        V4[Effect Compositor]
        V5[Audit Logger]
    end
    
    L4 --> L3
    L3 --> C1
    C1 --> L1
    C1 --> S1
    C1 --> S2
    C1 --> S3
    C1 --> S4
    
    L1 --> C3
    S1 --> C3
    S2 --> C3
    S3 --> C3
    S4 --> C3
    
    C2 --> C1
    C3 --> C4
    C4 --> V1
    C5 --> V2
    
    V1 --> V4
    V2 --> V4
    V3 --> V4
    V4 --> L4
    V5 --> L5
    
    L2 --> L1
    L5 --> L3
    
    subgraph "Data Flow Types"
        D1[ðŸ”¥ Real-time Tokens]
        D2[ðŸ“Š Performance Metrics]
        D3[ðŸŽ¯ Routing Decisions]
        D4[ðŸŒŠ Aggregated Streams]
        D5[âœ¨ Visual Effects Data]
    end
    
    L1 -.-> D1
    S1 -.-> D1
    S2 -.-> D1
    S3 -.-> D1
    S4 -.-> D1
    
    C5 -.-> D2
    C1 -.-> D3
    C3 -.-> D4
    V4 -.-> D5
    
    subgraph "Privacy & Control"
        P1[User-Controlled Satellites]
        P2[Local-First Default]
        P3[Encrypted Communications]
        P4[Audit Trail]
        P5[Resource Limits]
    end
    
    S1 --> P1
    L3 --> P2
    C1 --> P3
    V5 --> P4
    C2 --> P5
    
    classDef local fill:#34d399,stroke:#10b981,stroke-width:3px,color:#000
    classDef satellite fill:#fbbf24,stroke:#f59e0b,stroke-width:2px,color:#000
    classDef coordination fill:#60a5fa,stroke:#3b82f6,stroke-width:2px,color:#fff
    classDef visualization fill:#c084fc,stroke:#a855f7,stroke-width:2px,color:#fff
    classDef dataflow fill:#e2e8f0,stroke:#64748b,stroke-width:1px,color:#000
    classDef privacy fill:#f87171,stroke:#ef4444,stroke-width:2px,color:#fff
    
    class L1,L2,L3,L4,L5 local
    class S1,S2,S3,S4 satellite
    class C1,C2,C3,C4,C5 coordination
    class V1,V2,V3,V4,V5 visualization
    class D1,D2,D3,D4,D5 dataflow
    class P1,P2,P3,P4,P5 privacy
